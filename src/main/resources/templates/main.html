<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:text-decoration-line="http://www.w3.org/1999/xhtml"
      xmlns:text-decoration="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotlight</title>
    <link rel="stylesheet" th:href="@{/main.css}">
    <link rel="stylesheet" th:href="@{/nav.css}">

</head>
<body>
    <div th:replace="~{nav.html :: navbar}"></div>


    <div class="main page-wrapper">
        <div class="main-wrapper">
            <div class="main-content" th:each="i : ${items}">
                <a th:href="@{ '/detail/' + ${i.id} }" style="text-decoration: none">
                    <div class="content-image">
                        <img src="https://placehold.co/300">
                    </div>
                    <div class="content-info">
                        <h4 th:text="${i.title}">λ°”μ§€</h4>
                        <p th:text="${#numbers.formatInteger(i.price, 3, 'COMMA')} + 'μ›'">100λ§μ›</p>
                        <p th:text="${i.brand}">λΈλλ“</p>

<!--                        λ©”μΈνμ΄μ§€μ—μ„ μ‚­μ λ” κ΄€λ¦¬μ κ¶ν•μΌλ΅ λ„κΈ°κ³ -->
<!--                        μƒμ„Ένμ΄μ§€μ—μ„λ§ μ μ €κ°€ μ‚­μ ν•  μ μλ„λ΅ λ§λ“μ…-->
<!--                        μΏΌλ¦¬ μ¤νΈλ§ ν•μ‹μΌλ΅ λ³΄λƒ„-->
<!--                        <span th:onclick="fetch('/item?id=[[${i.id}]]', { method : 'DELETE' })-->
<!--                            .then(r => r.text())-->
<!--                            .then(() => {-->
<!--                                location.reload();-->
<!--                            })-->
<!--                        ">π—‘οΈ</span>-->


<!--                        JSON ν•μ‹μΌλ΅ λ³΄λƒ„-->
                        <span th:onclick="deleteItem([[${i.id}]])">π—‘οΈ</span>
                        <script>
                            function deleteItem(itemId) {
                                fetch('/item', {
                                    method : 'DELETE',
                                    headers : { 'Content-Type' : 'application/json' },
                                    body : JSON.stringify({ id: itemId })
                                })
                                .then(r => r.text())
                                .then(() => {
                                    location.reload();
                                })
                            }
                        </script>

                    </div>
                </a>
            </div>

        </div>
    </div>


</body>
</html>
